<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:"Cairo",sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;align-items:center;justify-content:center}
    .container{background:white;padding:40px;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);max-width:400px;width:90%}
    h1{text-align:center;color:#667eea;margin-bottom:30px;font-size:28px}
    input{width:100%;padding:15px;border:2px solid #e0e0e0;border-radius:10px;font-size:16px;font-family:"Cairo",sans-serif;transition:all 0.3s}
    input:focus{outline:none;border-color:#667eea}
    button{width:100%;padding:15px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;border-radius:10px;font-size:18px;font-weight:700;cursor:pointer;margin-top:20px;transition:transform 0.2s}
    button:hover{transform:translateY(-2px)}
    button:active{transform:translateY(0)}
    .msg{text-align:center;margin-top:15px;padding:10px;border-radius:8px;font-size:14px;display:none}
    .msg.error{background:#ffe0e0;color:#d32f2f;display:block}
    .msg.success{background:#e0f7e0;color:#2e7d32;display:block}
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
    <input type="password" id="pass" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" autofocus>
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <div class="msg" id="msg"></div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

  <script>
    // Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAZdj86H_cYRTP2xQfF0_YqnCZDPnRnWis",
      authDomain: "mandouby-79556.firebaseapp.com",
      databaseURL: "https://mandouby-79556-default-rtdb.firebaseio.com",
      projectId: "mandouby-79556",
      storageBucket: "mandouby-79556.firebasestorage.app",
      messagingSenderId: "842326054163",
      appId: "1:842326054163:web:32d2611067e45c30ef76e6",
      measurementId: "G-EJ14KM885Y"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
    const PASSWORDS = {
      'mandoub2025': { role: 'mandoub', username: 'mandoub', page: 'mandoub.html' },
      'admin2025': { role: 'admin', username: 'admin', page: 'admin.html' }
    };

    function showMsg(text, type) {
      const msg = document.getElementById('msg');
      msg.textContent = text;
      msg.className = 'msg ' + type;
    }

    function login() {
      const pass = document.getElementById('pass').value.trim();
      
      if(!pass) {
        showMsg('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±', 'error');
        return;
      }

      const config = PASSWORDS[pass];
      
      if(!config) {
        showMsg('ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©', 'error');
        document.getElementById('pass').value = '';
        return;
      }

      // Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø©
      const session = {
        username: config.username,
        role: config.role,
        loggedAt: new Date().toISOString()
      };
      localStorage.setItem('app_session_v1', JSON.stringify(session));

      // ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Firebase
      db.ref('login_logs').push({
        username: config.username,
        role: config.role,
        timestamp: new Date().toISOString()
      });

      showMsg('âœ… Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„...', 'success');
      setTimeout(() => {
        window.location.href = config.page;
      }, 500);
    }

    // Enter Ù„Ù„Ø¯Ø®ÙˆÙ„
    document.getElementById('pass').addEventListener('keypress', (e) => {
      if(e.key === 'Enter') login();
    });

    // ØªÙˆØ¬ÙŠÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¬Ù„
    const session = JSON.parse(localStorage.getItem('app_session_v1')||'null');
    if(session && session.role) {
      if(session.role === 'mandoub') window.location.href = 'mandoub.html';
      if(session.role === 'admin') window.location.href = 'admin.html';
    }
  </script>
</body>
</html>